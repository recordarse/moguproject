"use strict";!function(){function n(t){for(var i=decodeURI(document.cookie).split("; "),c=0;c<i.length;c++){var e=i[c].split("=");if(e[0]===t)return e[1]}}if(n("cookiesid")&&n("cookienum")){var c=n("cookiesid").split(","),e=n("cookienum").split(",");$.each(c,function(t,i){!function(e,n){$.ajax({url:"http://10.31.158.34/moguproject/php/piclist.php",dataType:"json"}).done(function(t){$.each(t,function(t,i){if(e==i.picid){var c=$(".cart_mitem:hidden").clone(!0,!0);c.find(".desc").find("img").attr("src",i.url),c.find(".desc").find("img").attr("sid",i.picid),c.find(".desc").find(".cart_hoverline").html(i.title),c.find(".price").find(".cart_data_sprice").html(i.price),c.find(".num").find(".cart_num_input").val(n),c.find(".total").find("p").text((i.price*n).toFixed(2)),c.css("display","block"),$(".normalShopTag").append(c)}})})}(c[t],e[t])})}n("cookiesid")&&n("cookienum")?($(".cart_empty").hide(),$("#cartPage").show()):$(".cart_empty").show(),$("#s_all_h").on("change",function(){$(".cart_mitem:visible").find(":checkbox").prop("checked",$(this).prop("checked")),$("#s_all_h").prop("checked",$(this).prop("checked"))});var t=$(".cart_mitem:visible").find(":checkbox");$(".cart_mitem").on("change",t,function(){$(".cart_mitem:visible").find("input:checkbox").length==$(".cart_mitem:visible").find("input:checked").length?$("#s_all_h").prop("checked",!0):$("#s_all_h").prop("checked",!1)}),$("#s_all_f").on("change",function(){if($(".cart_mitem:visible").find(":checkbox").prop("checked",$(this).prop("checked")),$("#s_all_f").prop("checked",$(this).prop("checked")),$("#s_all_f").prop("checked")){for(var t=n("cookienum").split(","),i=0,c=0,e=0;e<t.length;e++)i+=Number(t[e]);$(".cart_paybar_info").find(".goodsNum").html(Number(i)),$(".cart_mitem:visible").each(function(t,i){c+=parseInt($(i).find(".total").find("p").html())}),$("#cartPaybar").find(".cart_money").html("￥"+c)}else $(".cart_paybar_info").find(".goodsNum").html(0),$("#cartPaybar").find(".cart_money").html("￥0")});t=$(".cart_mitem:visible").find(":checkbox");function a(t,i,c){var e=new Date;e.setDate(e.getDate()+c),document.cookie=t+"="+encodeURI(i)+";expires="+e}$(".cart_mitem").on("change",t,function(){if($(".cart_mitem:visible").find("input:checkbox").length==$(".cart_mitem:visible").find("input:checked").length)$("#s_all_f").prop("checked",!0);else{$("#s_all_f").prop("checked",!1);var c=0,e=0;$(".cart_thcheck:checked").each(function(t,i){e+=$(i).parents(".cart_mitem").find(".num").find(".cart_num_input").val(),c+=parseInt($(i).parents(".cart_mitem").find(".total").find("p").html())}),$(".cart_paybar_info").find(".goodsNum").html(e),$("#cartPaybar").find(".cart_money").html("￥"+c)}}),$(".cart_num_add").on("click",function(){var t=$(this).parents(".cart_mitem").find(".cart_num input").val();99<=++t&&(t=99),$(this).parents(".cart_mitem").find(".cart_num input").val(t);var i=$(this).parents(".cart_mitem").find(".price").find(".cart_bold").html();$(this).parents(".cart_mitem").find(".total p").html((t*i).toFixed(2)),d($(this))}),$(".cart_num_reduce").css("cursor","pointer"),$(".cart_num_reduce").on("click",function(){var t=$(this).parents(".cart_mitem").find(".cart_num input").val();--t<=1&&(t=1),$(this).parents(".cart_mitem").find(".cart_num input").val(t);var i=$(this).parents(".cart_mitem").find(".price").find(".cart_bold").html();$(this).parents(".cart_mitem").find(".total p").html((t*i).toFixed(2)),d($(this))}),$(".cart_num input").on("input",function(){var t=parseInt($(this).val());/^\d+$/g.test(t)?99<=t?$(this).val(99):t<=0?$(this).val(1):$(this).val(t):$(this).val(1),d($(this))});var r=[],o=[];function m(){n("cookiesid")&&n("cookienum")&&(r=n("cookiesid").split(","),o=n("cookienum").split(","))}function d(t){m();var i=t.parents(".cart_mitem").find("img").attr("sid");o[$.inArray(i,r)]=t.parents(".cart_mitem").find(".cart_num input").val(),a("cookienum",o.toString(),7)}function i(c,t){var e=-1;$.each(t,function(t,i){c==i&&(e=t)}),t.splice(e,1),o.splice(e,1),a("cookiesid",t.toString(),7),a("cookienum",o.toString(),7)}$(".cart_mitem").on("click",".edit a",function(t){m(),confirm("你确定要删除吗？")&&$(this).parents(".cart_mitem").remove(),console.log(1),i($(this).parents(".cart_mitem").find(".desc").find("img").attr("sid"),r)}),$(".cart_paybar_vmbox a:first").on("click",function(){m(),confirm("你确定要全部删除吗？")&&$(".cart_mitem:visible").each(function(){$(this).find("input:checkbox").is(":checked")&&($(this).remove(),i($(this).find(".desc").find("img").attr("sid"),r))})})}();